;; File paths
(setq dotfiles-dir (file-name-directory
                    (or (buffer-file-name) load-file-name)))
(setq package-user-dir (concat dotfiles-dir "elpa"))
(add-to-list 'load-path (concat dotfiles-dir "elpa-other"))
(add-to-list 'load-path (concat dotfiles-dir "/themes"))

;; Package management
(when
    (load
     (expand-file-name "~/.emacs.d/elpa/package.el"))
  (package-initialize))

;; Change GUI on load
(if (fboundp 'tool-bar-mode) (tool-bar-mode -1))
(if (fboundp 'scroll-bar-mode) (scroll-bar-mode -1))
(setq ring-bell-function 'ignore)

(show-paren-mode 1)
(setq inhibit-splash-screen t)
(add-to-list 'load-path "~/workspace/emacs/color-theme-6.6.0/")
(require 'color-theme)
(require 'color-theme-tangotango)
(require 'color-theme-tango)
(eval-after-load "color-theme"
  '(progn
     (color-theme-initialize)))
(color-theme-tangotango)
(set-fringe-mode '(0 . 0))
(set-default-font "-apple-Inconsolata-medium-normal-normal-*-14-*-*-*-m-0-iso10646-1")

;; Mode changes
(defalias 'yes-or-no-p 'y-or-n-p)

;; File search
(ido-mode t)
(setq ido-enable-flex-matching t)

;; Window management
(windmove-default-keybindings)
(require 'buffer-move)

;; New keybindings
(global-set-key (kbd "<M-up>") 'buf-move-up)
(global-set-key (kbd "<M-down>") 'buf-move-down)
(global-set-key (kbd "<M-left>") 'buf-move-left)
(global-set-key (kbd "<M-right>") 'buf-move-right)
(global-set-key (kbd "<M-s>") 'save-buffer)
(global-set-key (kbd "<M-z>") 'undo)
(global-set-key (kbd "<C-w>") 'backward-kill-word)
(global-set-key (kbd "<C-x><C-k>") 'kill-region)
(global-set-key (kbd "<C-x><M-m>") 'ansi-term)
(global-set-key (kbd "C-x C-M-f") 'find-file-in-project)

;; Hooks

;; Window management
(windmove-default-keybindings)

;; Javascript helpers
(autoload 'espresso-mode "espresso" "Start espresso-mode" t)
(add-to-list 'auto-mode-alist '("\\.js$" . espresso-mode))
(add-to-list 'auto-mode-alist '("\\.json$" . espresso-mode))

;; C/C++ stuff
(setq c-default-style "linux"
      c-basic-offset 4
)
;; Load modes
(add-to-list 'auto-mode-alist '("\\.mako$" . html-mode))

(custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(show-paren-mode t))
(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(italic ((t nil))))
